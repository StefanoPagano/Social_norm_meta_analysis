--------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/Stefano/Documents/GitHub/Social_norm_meta_analysis/Analysis/stata.log
  log type:  text
 opened on:  31 Mar 2022, 16:08:44

. 
. * DG *
. preserve 

. drop if game_type != "ToG"
(8,135 observations deleted)

. 
. * Fehr and schmidt model *
. * set constraint for IA *
. constraint 1 payoff = 1

. gen sqr_other_payoff_ahead = other_payoff_ahead^2

. * run loop *
. levelsof treatment_id, local(levels)
`"2007Lis165_1b"' `"2013Kru001_1b"' `"2019Cha026_3"'

. /*
> foreach l of local levels {
>         clogit a payoff other_payoff_ahead other_payoff_behind if treatment_id == "`l'", group(id) vce(cluster subject_id) col
> linear constraints(1)
> }
>  */
. 
. * Charness Rabin 2002 *
. gen r = payoff > endowment/2

. gen s = payoff < endowment/2

. gen rho = endowment*r-2*payoff*r

. gen sigma = endowment*s-2*payoff*s

. 
. *local i = 1
. foreach l of local levels {
  2.         di "treatment -> `l' "
  3.         
.         /* Social expectation */
.         clogit a payoff mean_app if treatment_id == "`l'", group(id) vce(bootstrap, reps(500))
  4.         est store N`l'
  5.         local deltaN`l' = _b[payoff]
  6.         local gammaN`l' = _b[mean_app]
  7.         local se_deltaN`l' = _se[payoff]
  8.         local se_gammaN`l' = _se[mean_app]
  9.         
.         /* Charness Rabin 2002 */
.         clogit a payoff rho sigma if treatment_id == "`l'", group(id) vce(bootstrap, reps(500)) collinear constraints(1)
 10.         est store CR`l'
 11.         local rhoCR`l' = _b[rho]
 12.         local sigmaCR`l' = _b[sigma]
 13.         local se_rhoCR`l' = _se[rho]
 14.         local se_sigmaCR`l' = _se[sigma]
 15.         *local ++i
. }
treatment -> 2007Lis165_1b 
(running clogit on estimation sample)

Bootstrap replications (500)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..................................................   100
..................................................   150
..................................................   200
..................................................   250
..................................................   300
..................................................   350
..................................................   400
..................................................   450
..................................................   500

Conditional (fixed-effects) logistic regression

                                                Number of obs     =        552
                                                Replications      =        500
                                                Wald chi2(2)      =      30.94
                                                Prob > chi2       =     0.0000
Log likelihood = -78.535821                     Pseudo R2         =     0.3129

                                     (Replications based on 46 clusters in id)
------------------------------------------------------------------------------
             |   Observed   Bootstrap                         Normal-based
           a |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      payoff |   1.233267   .3435595     3.59   0.000     .5599024    1.906631
    mean_app |    1.16344     .86116     1.35   0.177    -.5244025    2.851283
------------------------------------------------------------------------------
(running clogit on estimation sample)

Bootstrap replications (500)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..................................................   100
..................................................   150
..................................................   200
..................................................   250
..................................................   300
..................................................   350
..................................................   400
..................................................   450
..................................................   500

Conditional (fixed-effects) logistic regression

                                                Number of obs     =        552
                                                Replications      =        500
                                                Wald chi2(2)      =       3.43
Log likelihood =  -78.22562                     Prob > chi2       =     0.1797

 ( 1)  [a]payoff = 1
                                     (Replications based on 46 clusters in id)
------------------------------------------------------------------------------
             |   Observed   Bootstrap                         Normal-based
           a |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      payoff |          1  (constrained)
         rho |   .1415286   .0770571     1.84   0.066    -.0095005    .2925577
       sigma |  -.6568533    6.76975    -0.10   0.923    -13.92532    12.61161
------------------------------------------------------------------------------
treatment -> 2013Kru001_1b 
(running clogit on estimation sample)

Bootstrap replications (500)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..................................................   100
..................................................   150
..................................................   200
..................................................   250
..................................................   300
..................................................   350
..................................................   400
..................................................   450
..................................................   500

Conditional (fixed-effects) logistic regression

                                                Number of obs     =        594
                                                Replications      =        500
                                                Wald chi2(2)      =      13.48
                                                Prob > chi2       =     0.0012
Log likelihood =  -104.6423                     Pseudo R2         =     0.1919

                                     (Replications based on 54 clusters in id)
------------------------------------------------------------------------------
             |   Observed   Bootstrap                         Normal-based
           a |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      payoff |   .6389285   .1865566     3.42   0.001     .2732843    1.004573
    mean_app |   1.952321   .5318217     3.67   0.000      .909969    2.994672
------------------------------------------------------------------------------
(running clogit on estimation sample)

Bootstrap replications (500)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..................................................   100
..................................................   150
..................................................   200
..................................................   250
..................................................   300
..................................................   350
..................................................   400
..................................................   450
..................................................   500

Conditional (fixed-effects) logistic regression

                                                Number of obs     =        594
                                                Replications      =        500
                                                Wald chi2(2)      =      78.24
Log likelihood = -115.19964                     Prob > chi2       =     0.0000

 ( 1)  [a]payoff = 1
                                     (Replications based on 54 clusters in id)
------------------------------------------------------------------------------
             |   Observed   Bootstrap                         Normal-based
           a |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      payoff |          1  (constrained)
         rho |   .4934821   .0571912     8.63   0.000     .3813895    .6055747
       sigma |   .1781943    .669313     0.27   0.790    -1.133635    1.490024
------------------------------------------------------------------------------
treatment -> 2019Cha026_3 
(running clogit on estimation sample)

Bootstrap replications (500)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..................................................   100
..................................................   150
..................................................   200
..................................................   250
..................................................   300
..................................................   350
..................................................   400
..................................................   450
..................................................   500

Conditional (fixed-effects) logistic regression

                                                Number of obs     =      1,254
                                                Replications      =        500
                                                Wald chi2(2)      =      40.97
                                                Prob > chi2       =     0.0000
Log likelihood = -210.81063                     Pseudo R2         =     0.2288

                                    (Replications based on 114 clusters in id)
------------------------------------------------------------------------------
             |   Observed   Bootstrap                         Normal-based
           a |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      payoff |   .8136274   .1555604     5.23   0.000     .5087346     1.11852
    mean_app |   3.113446   .5149462     6.05   0.000      2.10417    4.122722
------------------------------------------------------------------------------
(running clogit on estimation sample)

Bootstrap replications (500)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..................................................   100
..................................................   150
..................................................   200
..................................................   250
..................................................   300
..................................................   350
..................................................   400
..................................................   450
..................................................   500

Conditional (fixed-effects) logistic regression

                                                Number of obs     =      1,254
                                                Replications      =        500
                                                Wald chi2(2)      =    1193.10
Log likelihood =  -252.3656                     Prob > chi2       =     0.0000

 ( 1)  [a]payoff = 1
                                    (Replications based on 114 clusters in id)
------------------------------------------------------------------------------
             |   Observed   Bootstrap                         Normal-based
           a |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      payoff |          1  (constrained)
         rho |   .2664707   .0582584     4.57   0.000     .1522863     .380655
       sigma |   .4599324   .0186202    24.70   0.000     .4234374    .4964274
------------------------------------------------------------------------------

. 
. foreach l of local levels {
  2. estimates stats N`l' CR`l'
  3. }

Akaike's information criterion and Bayesian information criterion

-----------------------------------------------------------------------------
       Model |        Obs  ll(null)  ll(model)      df         AIC        BIC
-------------+---------------------------------------------------------------
N2007Lis1~1b |        552 -114.3057  -78.53582       2    161.0716   169.6987
CR2007Lis~1b |        552         .  -78.22562       2    160.4512   169.0783
-----------------------------------------------------------------------------
               Note: N=Obs used in calculating BIC; see [R] BIC note.

Akaike's information criterion and Bayesian information criterion

-----------------------------------------------------------------------------
       Model |        Obs  ll(null)  ll(model)      df         AIC        BIC
-------------+---------------------------------------------------------------
N2013Kru0~1b |        594 -129.4863  -104.6423       2    213.2846   222.0584
CR2013Kru~1b |        594         .  -115.1996       2    234.3993    243.173
-----------------------------------------------------------------------------
               Note: N=Obs used in calculating BIC; see [R] BIC note.

Akaike's information criterion and Bayesian information criterion

-----------------------------------------------------------------------------
       Model |        Obs  ll(null)  ll(model)      df         AIC        BIC
-------------+---------------------------------------------------------------
N2019Cha02~3 |      1,254 -273.3601  -210.8106       2    425.6213   435.8895
CR2019Cha0~3 |      1,254         .  -252.3656       2    508.7312   518.9994
-----------------------------------------------------------------------------
               Note: N=Obs used in calculating BIC; see [R] BIC note.

. 
. foreach l of local levels {
  2.   di "`l', `deltaN`l'', `gammaN`l'', `se_deltaN`l'', `se_gammaN`l'', `rhoCR`l'', `sigmaCR`l'', `se_rhoCR`l'', `se_sigmaCR`l
> ''"
  3.  }
2007Lis165_1b, 1.233266644626356, 1.163440154405696, .3435595144415278, .8611600413527681, .1415286123802219, -.6568532650479111
> , .0770570939196154, 6.769749549668573
2013Kru001_1b, .6389284800155534, 1.952320513088557, .1865565866027275, .5318217483614829, .4934821009514798, .178194318211324, 
> .0571911501765197, .6693129579553423
2019Cha026_3, .8136273725335864, 3.113446277653551, .1555603956004946, .5149462492685276, .2664706521277586, .4599324055366911, 
> .0582584028256027, .0186202453886004

.  
.  
.  log close
      name:  <unnamed>
       log:  /Users/Stefano/Documents/GitHub/Social_norm_meta_analysis/Analysis/stata.log
  log type:  text
 closed on:  31 Mar 2022, 16:24:28
--------------------------------------------------------------------------------------------------------------------------------
