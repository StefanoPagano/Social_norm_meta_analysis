--------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/Stefano/Documents/GitHub/Social_norm_meta_analysis/Analysis/stata.log
  log type:  text
 opened on:  31 Mar 2022, 16:53:09

. 
. * DG *
. preserve 

. drop if game_type != "Donation Game"
(8,291 observations deleted)

. 
. * Fehr and schmidt model *
. * set constraint for IA *
. constraint 1 payoff = 1

. gen sqr_other_payoff_ahead = other_payoff_ahead^2

. * run loop *
. levelsof treatment_id, local(levels)
`"2020And089_1"' `"2020And089_2"'

. /*
> foreach l of local levels {
>         clogit a payoff other_payoff_ahead other_payoff_behind if treatment_id == "`l'", group(id) vce(cluster subject_id) col
> linear constraints(1)
> }
>  */
. 
. * Charness Rabin 2002 *
. gen r = payoff > endowment/2

. gen s = payoff < endowment/2

. gen rho = endowment*r-2*payoff*r

. gen sigma = endowment*s-2*payoff*s

. 
. *local i = 1
. foreach l of local levels {
  2.         di "treatment -> `l' "
  3.         
.         /* Social expectation */
.         clogit a payoff mean_app if treatment_id == "`l'", group(id) vce(bootstrap, reps(500))
  4.         est store N`l'
  5.         local deltaN`l' = _b[payoff]
  6.         local gammaN`l' = _b[mean_app]
  7.         local se_deltaN`l' = _se[payoff]
  8.         local se_gammaN`l' = _se[mean_app]
  9.         
.         /* Charness Rabin 2002 */
.         clogit a payoff rho sigma if treatment_id == "`l'", group(id) vce(bootstrap, reps(500)) collinear constraints(1)
 10.         est store CR`l'
 11.         local rhoCR`l' = _b[rho]
 12.         local sigmaCR`l' = _b[sigma]
 13.         local se_rhoCR`l' = _se[rho]
 14.         local se_sigmaCR`l' = _se[sigma]
 15.         *local ++i
. }
treatment -> 2020And089_1 
(running clogit on estimation sample)

Bootstrap replications (500)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..................................................   100
..................................................   150
..................................................   200
..................................................   250
..................................................   300
..................................................   350
..................................................   400
..................................................   450
..................................................   500

Conditional (fixed-effects) logistic regression

                                                Number of obs     =      1,146
                                                Replications      =        500
                                                Wald chi2(2)      =      34.39
                                                Prob > chi2       =     0.0000
Log likelihood = -321.80674                     Pseudo R2         =     0.0597

                                    (Replications based on 191 clusters in id)
------------------------------------------------------------------------------
             |   Observed   Bootstrap                         Normal-based
           a |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      payoff |  -.1192083    .022919    -5.20   0.000    -.1641287    -.074288
    mean_app |  -4.262604   .9134784    -4.67   0.000    -6.052989   -2.472219
------------------------------------------------------------------------------
(running clogit on estimation sample)

Bootstrap replications (500)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..................................................   100
..................................................   150
..................................................   200
..................................................   250
..................................................   300
..................................................   350
..................................................   400
..................................................   450
..................................................   500

Conditional (fixed-effects) logistic regression

                                                Number of obs     =      1,146
                                                Replications      =        500
                                                Wald chi2(2)      =   76537.36
Log likelihood = -311.62494                     Prob > chi2       =     0.0000

 ( 1)  [a]payoff = 1
                                    (Replications based on 191 clusters in id)
------------------------------------------------------------------------------
             |   Observed   Bootstrap                         Normal-based
           a |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      payoff |          1  (constrained)
         rho |   .4746467   .0056489    84.02   0.000     .4635751    .4857183
       sigma |   .5377649   .0056988    94.36   0.000     .5265955    .5489344
------------------------------------------------------------------------------
treatment -> 2020And089_2 
(running clogit on estimation sample)

Bootstrap replications (500)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..................................................   100
..................................................   150
..................................................   200
..................................................   250
..................................................   300
..................................................   350
..................................................   400
..................................................   450
..................................................   500

Conditional (fixed-effects) logistic regression

                                                Number of obs     =      1,098
                                                Replications      =        500
                                                Wald chi2(2)      =      12.39
                                                Prob > chi2       =     0.0020
Log likelihood = -320.37966                     Pseudo R2         =     0.0229

                                    (Replications based on 183 clusters in id)
------------------------------------------------------------------------------
             |   Observed   Bootstrap                         Normal-based
           a |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      payoff |   -.072792   .0251424    -2.90   0.004    -.1220702   -.0235139
    mean_app |  -2.536792    1.02528    -2.47   0.013    -4.546304   -.5272791
------------------------------------------------------------------------------
(running clogit on estimation sample)

Bootstrap replications (500)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..................................................   100
..................................................   150
..................................................   200
..................................................   250
..................................................   300
..................................................   350
..................................................   400
..................................................   450
..................................................   500

Conditional (fixed-effects) logistic regression

                                                Number of obs     =      1,098
                                                Replications      =        500
                                                Wald chi2(2)      =   72087.67
Log likelihood = -309.67138                     Prob > chi2       =     0.0000

 ( 1)  [a]payoff = 1
                                    (Replications based on 183 clusters in id)
------------------------------------------------------------------------------
             |   Observed   Bootstrap                         Normal-based
           a |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
      payoff |          1  (constrained)
         rho |   .4787805    .005743    83.37   0.000     .4675244    .4900367
       sigma |   .5298522   .0057723    91.79   0.000     .5185386    .5411658
------------------------------------------------------------------------------

. 
. foreach l of local levels {
  2. estimates stats N`l' CR`l'
  3. }

Akaike's information criterion and Bayesian information criterion

-----------------------------------------------------------------------------
       Model |        Obs  ll(null)  ll(model)      df         AIC        BIC
-------------+---------------------------------------------------------------
N2020And08~1 |      1,146 -342.2261  -321.8067       2    647.6135   657.7015
CR2020And0~1 |      1,146         .  -311.6249       2    627.2499   637.3379
-----------------------------------------------------------------------------
               Note: N=Obs used in calculating BIC; see [R] BIC note.

Akaike's information criterion and Bayesian information criterion

-----------------------------------------------------------------------------
       Model |        Obs  ll(null)  ll(model)      df         AIC        BIC
-------------+---------------------------------------------------------------
N2020And08~2 |      1,098  -327.892  -320.3797       2    644.7593   654.7618
CR2020And0~2 |      1,098         .  -309.6714       2    623.3428   633.3452
-----------------------------------------------------------------------------
               Note: N=Obs used in calculating BIC; see [R] BIC note.

. 
. foreach l of local levels {
  2.   di "`l', `deltaN`l'', `gammaN`l'', `se_deltaN`l'', `se_gammaN`l'', `rhoCR`l'', `sigmaCR`l'', `se_rhoCR`l'', `se_sigmaCR`l
> ''"
  3.  }
2020And089_1, -.1192083374605045, -4.262603865167915, .0229189736613866, .9134784029899795, .4746467284723443, .5377649346030553
> , .0056488762530717, .0056988038337741
2020And089_2, -.0727920159873812, -2.536791785499513, .0251423774110217, 1.025280405763559, .4787805383287603, .5298522136925483
> , .0057430368953767, .0057723415347068

.  
.  
.  log close
      name:  <unnamed>
       log:  /Users/Stefano/Documents/GitHub/Social_norm_meta_analysis/Analysis/stata.log
  log type:  text
 closed on:  31 Mar 2022, 16:56:32
--------------------------------------------------------------------------------------------------------------------------------
