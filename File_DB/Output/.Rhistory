v.names = c("norms", "payoff"),
timevar = "scenarios"
) %>%
arrange(id, scenarios) %>%
mutate(A = give == (scenaios-1))
df_long <- reshape(
dataset_bas,
direction = "long",
varying = list(norm_app = 5:15, payoff = 16:26),
v.names = c("norms", "payoff"),
timevar = "scenarios"
) %>%
arrange(id, scenarios) %>%
mutate(A = give == (scenarios-1))
dataset_bas <- Basic_Verrina_2021 %>%
select(code, give, role_DG, social, dg_sn_1:dg_sn_11) %>%
filter(role_DG==1 & social==0) %>%
mutate(payoff_0 = 10,
payoff_1 = 9,
payoff_2 = 8,
payoff_3 = 7,
payoff_4 = 6,
payoff_5 = 5,
payoff_6 = 4,
payoff_7 = 3,
payoff_8 = 2,
payoff_9 = 1,
payoff_10 = 0)  %>%
mutate(dg_sn_1 = dplyr::recode(dg_sn_1, `1` = -1, `2` = -0.6, `3` = -0.3, `4` = 0.3, `5` = 0.6, `6` = 1),
dg_sn_2 = dplyr::recode(dg_sn_2, `1` = -1, `2` = -0.6, `3` = -0.3, `4` = 0.3, `5` = 0.6, `6` = 1),
dg_sn_3 = dplyr::recode(dg_sn_3, `1` = -1, `2` = -0.6, `3` = -0.3, `4` = 0.3, `5` = 0.6, `6` = 1),
dg_sn_4 = dplyr::recode(dg_sn_4, `1` = -1, `2` = -0.6, `3` = -0.3, `4` = 0.3, `5` = 0.6, `6` = 1),
dg_sn_5 = dplyr::recode(dg_sn_5, `1` = -1, `2` = -0.6, `3` = -0.3, `4` = 0.3, `5` = 0.6, `6` = 1),
dg_sn_6 = dplyr::recode(dg_sn_6, `1` = -1, `2` = -0.6, `3` = -0.3, `4` = 0.3, `5` = 0.6, `6` = 1),
dg_sn_7 = dplyr::recode(dg_sn_7, `1` = -1, `2` = -0.6, `3` = -0.3, `4` = 0.3, `5` = 0.6, `6` = 1),
dg_sn_8 = dplyr::recode(dg_sn_8, `1` = -1, `2` = -0.6, `3` = -0.3, `4` = 0.3, `5` = 0.6, `6` = 1),
dg_sn_9 = dplyr::recode(dg_sn_9, `1` = -1, `2` = -0.6, `3` = -0.3, `4` = 0.3, `5` = 0.6, `6` = 1),
dg_sn_10 = dplyr::recode(dg_sn_10, `1` = -1, `2` = -0.6, `3` = -0.3, `4` = 0.3, `5` = 0.6, `6` = 1),
dg_sn_11 = dplyr::recode(dg_sn_11, `1` = -1, `2` = -0.6, `3` = -0.3, `4` = 0.3, `5` = 0.6, `6` = 1))
df_long <- reshape(
dataset_bas,
direction = "long",
varying = list(norm_app = 5:15, payoff = 16:26),
v.names = c("norms", "payoff"),
timevar = "scenarios"
) %>%
arrange(id, scenarios) %>%
mutate(A = give == (scenarios-1))
xtabs(~norms, data=df_long)
xtabs(~norms + A, data=df_long)
xtabs(A ~ norms, data = df_long)
sum(xtabs(A ~ norms, data = df_long))
sum(xtabs(~norms + A, data=df_long))
xxx <- xtabs(A ~ norms, data = df_long) #count for each appropriateness level how much subject choice the scenarios
plot(xxx)
yyy <- xtabs(~norms + A, data=df_long)
xxx <- xtabs(A ~ norms, data = df_long) #count for each appropriateness level how much subject choice the scenarios
plot(yyy)
plot(xxx)
zzz <- xtabs(A ~ norms + payoff, data = df_long)
plot(zzz)
zzz <- xtabs(~ norms + payoff, data = df_long)
plot(zzz)
varying = list(norm_app = 5:15, payoff = 16:26),v.names = c("norms", "payoff"),
#model
df_long_model <- mlogit.data(dataset_bas,
shape = "long",
varying = list(norm_app = 5:15, payoff = 16:26),
alt.var = "scenarios")
#model
df_long_model <- mlogit.data(dataset_bas,
shape = "long",
choice = "A",
varying = list(norm_app = 5:15, payoff = 16:26),
alt.var = "scenarios")
#model
df_long_model <- mlogit.data(dataset_bas,
shape = "long",
choice = "A",
varying = c("norms","payoff")),
alt.var = "scenarios")
#model
df_long_model <- mlogit.data(dataset_bas,
shape = "long",
choice = "A",
varying = c("norms","payoff"),
alt.var = "scenarios")
#model
df_long_model <- mlogit.data(df_long,
shape = "long",
choice = "A",
varying = c("norms","payoff"),
alt.var = "scenarios")
df_long <- reshape(
dataset_bas,
direction = "long",
varying = list(norm_app = 5:15, payoff = 16:26),
v.names = c("norms", "payoff"),
timevar = "scenarios"
) %>%
arrange(id, scenarios) %>%
mutate(scenarios = scenarios - 1) %>%
mutate(A = give == scenarios)
yyy <- xtabs(~norms + A, data=df_long)
xxx <- xtabs(A ~ norms, data = df_long) #count for each appropriateness level how much subject choice the scenarios
zzz <- xtabs(~ norms + payoff, data = df_long)
plot(yyy)
plot(xxx)
plot(zzz)
#model
df_long_model <- mlogit.data(df_long,
shape = "long",
choice = "A",
varying = c("norms","payoff"),
alt.var = "scenarios")
table(df_long$scenarios, df_long$A)
table(df_long$id, df_long$A)
# import data
setwd("G:\.shortcut-targets-by-id\1IoJDOQWCFiL1qTzSja6byrAlCelNSTsT\Meta-analysis beliefs\Dati paper\2022Tve168")
# import data
setwd("G:/.shortcut-targets-by-id/1IoJDOQWCFiL1qTzSja6byrAlCelNSTsT/Meta-analysis beliefs/Dati paper/2022Tve168")
tve_df <- read.csv("non_linear_cpr_game.csv", sep = ",")
View(tve_df)
library(tidyverse)
tve_df <- read.csv("non_linear_cpr_game.csv", sep = ",")
library(readxl)
length(levels(as.factor(tve_df$participant.code)))
300*35
tve_df <- read.csv("non_linear_cpr_game.csv", sep = ",") %>%
select(partecipent.code, participant._round_number, player.contribution, session.label)
tve_df <- read.csv("non_linear_cpr_game.csv", sep = ",") %>%
select(partecipant.code, participant._round_number, player.contribution, session.label)
tve_df <- read.csv("non_linear_cpr_game.csv", sep = ",") %>%
select(participant.code, participant._round_number, player.contribution, session.label)
tve_cpr_choice_baseline <- tve_df %>%
select(participant.code, participant._round_number, player.contribution, session.label) %>%
filter(session.label="BASELINE")
tve_cpr_choice_baseline <- tve_df %>%
select(participant.code, participant._round_number, player.contribution, session.label) %>%
filter(session.label=="BASELINE")
tve_cpr_choice_messaging <- tve_df %>%
select(participant.code, participant._round_number, player.contribution, session.label) %>%
filter(session.label=="TREATMENT")
tve_df <- read.csv("non_linear_cpr_game.csv", sep = ",")
tve_cpr_choice_baseline <- tve_df %>%
select(participant.code, participant._round_number, player.contribution, session.label) %>%
filter(session.label=="BASELINE")
tve_cpr_choice_messaging <- tve_df %>%
select(participant.code, participant._round_number, player.contribution, session.label) %>%
filter(session.label=="TREATMENT")
# meta-information dataset
meta_dataset <- read_xlsx(path = "G:/.shortcut-targets-by-id/1IoJDOQWCFiL1qTzSja6byrAlCelNSTsT/Meta-analysis beliefs/Social Norms meta.xlsx", sheet = "ALL") %>% subset.data.frame(subset = PaperID == "2022Tve168", select = c(n_Paper, PaperID, TreatmentCode, TreatmentName_paper, Year, Outlet, Published, FirstTask, between_vs_within, Game_type, Standard_game, Baseline, Group_size, One_Shot_Repeated, Choice_Method, Matching, Rounds, Punishment, Rewards, Monetary_Incentivized_experiment, Environment, Method_elicitation, Separate_sample_beliefs, Belief_repeated, Before_after_main_decisions, KW_Normative, KW_Personal, Bicchieri_Empirical, Bicchieri_Normative, Bicchieri_Personal_Beliefs, Bicchieri_between, Incentives_beliefs, StatusTreatment_Roma)) #%>% mutate(TreatmentCode = as.numeric(TreatmentCode))
# Baseline-----------------
## 1. Choice dataframe ----
tve_baseline_coop <- tve_cpr_choice_baseline %>%
mutate(endowment = 30, cooperation = (30-player.contribution)/endowment) %>%
summarise(Avg_coop = mean(cooperation, na.rm =T),
Var_coop = var(cooperation, na.rm = T)) %>%
mutate(PaperID = "2022Tve168", TreatmentCode = "1a")
tve_baseline_coop
tve_df <- read.csv("non_linear_cpr_game.csv", sep = ",") %>%
select(participant.code, participant._round_number, player.contribution, session.label, player.empirical_expectations0:player.empirical_expectations4, player.personal_normative_beliefs, player.normative_expectations0:player.normative_expectations4)
tve_cpr_baseline <- tve_df %>%
filter(session.label=="BASELINE")
tve_cpr_messaging <- tve_df %>%
filter(session.label=="TREATMENT")
tve_df <- read.csv("non_linear_cpr_game.csv", sep = ",") %>%
select(participant.code, participant._round_number, player.contribution, session.label, player.empirical_expectations0:player.empirical_expectations4, player.personal_normative_beliefs, player.normative_expectations0:player.normative_expectations4) %>%
filter(participant._round_number==1)
tve_cpr_baseline <- tve_df %>%
filter(session.label=="BASELINE")
tve_cpr_messaging <- tve_df %>%
filter(session.label=="TREATMENT")
nrow(tve_df)
tve_df <- read.csv("non_linear_cpr_game.csv", sep = ",")
tve_df <- read.csv("non_linear_cpr_game.csv", sep = ",") %>%
select(participant.code, subsession.round_number, player.contribution, session.label, player.empirical_expectations0:player.empirical_expectations4, player.personal_normative_beliefs, player.normative_expectations0:player.normative_expectations4) %>%
filter(subsession.round_number==1)
tve_cpr_baseline <- tve_df %>%
filter(session.label=="BASELINE")
tve_cpr_messaging <- tve_df %>%
filter(session.label=="TREATMENT")
# Baseline-----------------
## 1. Choice dataframe ----
tve_baseline_coop <- tve_cpr_baseline %>%
mutate(endowment = 30, cooperation = (30-player.contribution)/endowment) %>%
summarise(Avg_coop = mean(cooperation, na.rm =T),
Var_coop = var(cooperation, na.rm = T)) %>%
mutate(PaperID = "2022Tve168", TreatmentCode = "1a")
tve_baseline_coop
## 2. Beliefs dataframe ----
n_sub_N = tve_cpr_baseline %>%
select(participant.code) %>%
summarise(n=length(unique(participant.code)))
n_sub_N
View(tve_cpr_baseline)
### compute norm
tve_baseline_appropriateness_sum <- tve_cpr_baseline %>%
reshape(varying = player.normative_expectations0:player.normative_expectations4, v.names = NE)
### compute norm
tve_baseline_appropriateness_sum <- tve_cpr_baseline %>%
reshape(direction = "long", varying = player.normative_expectations0:player.normative_expectations4, v.names = NE)
### compute norm
tve_baseline_appropriateness_sum <- tve_cpr_baseline %>%
reshape(direction = "long", varying = c(player.normative_expectations0:player.normative_expectations4), v.names = NE)
### compute norm
tve_baseline_appropriateness_sum <- tve_cpr_baseline %>%
reshape(direction = "long", varying = list(player.normative_expectations0:player.normative_expectations4), v.names = NE)
### compute norm
tve_baseline_appropriateness_sum <- tve_cpr_baseline %>%
reshape(direction = "long", varying = 11:15, v.names = NE)
### compute norm
tve_baseline_appropriateness_sum <- tve_cpr_baseline %>%
reshape(direction = "long", varying = 11:15, v.names = "NE")
View(tve_baseline_appropriateness_sum)
View(master)
### compute norm
tve_baseline_appropriateness_sum <- tve_cpr_baseline %>%
reshape(direction = "long", varying = 11:15, v.names = "NE") %>%
group_by(participant.code) %>%
summarise(mean_sub_NE=mean(NE, na.rm=T))
### compute norm
tve_baseline_appropriateness_sum <- tve_cpr_baseline %>%
reshape(direction = "long", varying = 11:15, v.names = "NE") %>%
group_by(participant.code) %>%
summarise(mean_sub_NE=mean(NE, na.rm=T)) %>%
summarise(Avg_NE=mean(mean_sub_NE, na.rm=T))
### compute norm
tve_baseline_appropriateness_sum <- tve_cpr_baseline %>%
reshape(direction = "long", varying = 11:15, v.names = "NE") %>%
group_by(participant.code) %>%
summarise(mean_sub_NE=mean(NE, na.rm=T)) %>%
summarise(Avg_NE=mean(mean_sub_NE, na.rm=T),
Var_NE=var(mean_sub_NE, na.rm=T))
### compute norm
tve_baseline_appropriateness_sum <- tve_cpr_baseline %>%
reshape(direction = "long", varying = 11:15, v.names = "NE") %>%
group_by(participant.code) %>%
summarise(mean_sub_NE=mean(NE, na.rm=T)) %>%
summarise(Avg_NE=mean(mean_sub_NE, na.rm=T)/30,
Var_NE=var(mean_sub_NE, na.rm=T))
### compute personal normative beliefs
EE_baseline <- tve_cpr_baseline %>%
reshape(direction = "long", varying = 5:9, v.names = "EE") %>%
group_by(participant.code) %>%
summarise(mean_sub_EE=mean(EE, na.rm=T)) %>%
summarise(Avg_NE=mean(mean_sub_EE, na.rm=T)/30,
Var_NE=var(mean_sub_EE, na.rm=T))
# import data
setwd("G:/.shortcut-targets-by-id/1IoJDOQWCFiL1qTzSja6byrAlCelNSTsT/Meta-analysis beliefs/Dati paper/2022Tve168")
tve_df <- read.csv("non_linear_cpr_game.csv", sep = ",") %>%
select(participant.code, subsession.round_number, player.contribution, session.label, player.empirical_expectations0:player.empirical_expectations4, player.personal_normative_beliefs, player.normative_expectations0:player.normative_expectations4) %>%
filter(subsession.round_number==1)
tve_cpr_baseline <- tve_df %>%
filter(session.label=="BASELINE")
tve_cpr_messaging <- tve_df %>%
filter(session.label=="TREATMENT")
# meta-information dataset
meta_dataset <- read_xlsx(path = "G:/.shortcut-targets-by-id/1IoJDOQWCFiL1qTzSja6byrAlCelNSTsT/Meta-analysis beliefs/Social Norms meta.xlsx", sheet = "ALL") %>% subset.data.frame(subset = PaperID == "2022Tve168", select = c(n_Paper, PaperID, TreatmentCode, TreatmentName_paper, Year, Outlet, Published, FirstTask, between_vs_within, Game_type, Standard_game, Baseline, Group_size, One_Shot_Repeated, Choice_Method, Matching, Rounds, Punishment, Rewards, Monetary_Incentivized_experiment, Environment, Method_elicitation, Separate_sample_beliefs, Belief_repeated, Before_after_main_decisions, KW_Normative, KW_Personal, Bicchieri_Empirical, Bicchieri_Normative, Bicchieri_Personal_Beliefs, Bicchieri_between, Incentives_beliefs, StatusTreatment_Roma)) #%>% mutate(TreatmentCode = as.numeric(TreatmentCode))
# Baseline-----------------
## 1. Choice dataframe ----
tve_baseline_coop <- tve_cpr_baseline %>%
mutate(endowment = 30, cooperation = (30-player.contribution)/endowment) %>%
summarise(Avg_coop = mean(cooperation, na.rm =T),
Var_coop = var(cooperation, na.rm = T)) %>%
mutate(PaperID = "2022Tve168", TreatmentCode = "1a")
## 2. Beliefs dataframe ----
n_sub_N = tve_cpr_baseline %>%
select(participant.code) %>%
summarise(n=length(unique(participant.code)))
### compute normative expectation
NE_baseline <- tve_cpr_baseline %>%
reshape(direction = "long", varying = 11:15, v.names = "NE") %>%
group_by(participant.code) %>%
summarise(mean_sub_NE=mean(NE, na.rm=T)) %>%
summarise(Avg_NE=mean(mean_sub_NE, na.rm=T)/30,
Var_NE=var(mean_sub_NE, na.rm=T))
NE_baseline
### compute personal normative beliefs
EE_baseline <- tve_cpr_baseline %>%
reshape(direction = "long", varying = 5:9, v.names = "EE") %>%
group_by(participant.code) %>%
summarise(mean_sub_EE=mean(EE, na.rm=T)) %>%
summarise(Avg_NE=mean(mean_sub_EE, na.rm=T)/30,
Var_NE=var(mean_sub_EE, na.rm=T))
EE_baseline
### compute personal normative beliefs
EE_baseline <- tve_cpr_baseline %>%
reshape(direction = "long", varying = 5:9, v.names = "EE") %>%
group_by(participant.code) %>%
summarise(mean_sub_EE=mean(EE, na.rm=T)) %>%
summarise(Avg_EE=mean(mean_sub_EE, na.rm=T)/30,
Var_EE=var(mean_sub_EE, na.rm=T))
EE_baseline
library(readr)
master <- read_csv("~/CNR/GitHub/Social_norm_meta_analysis/File_DB/Output/Treatment.csv")
View(master)
### compute normative expectation
NE_baseline <- tve_cpr_baseline %>%
reshape(direction = "long", varying = 11:15, v.names = "NE") %>%
group_by(participant.code) %>%
summarise(mean_sub_NE=mean(NE, na.rm=T)) %>%
summarise(Avg_NE=mean(mean_sub_NE, na.rm=T)/30,
Var_NE=var(mean_sub_NE, na.rm=T)) %>%
mutate(PaperID = "2022Tve168",
TreatmentCode = "1a")
### compute personal normative beliefs
EE_baseline <- tve_cpr_baseline %>%
reshape(direction = "long", varying = 5:9, v.names = "EE") %>%
group_by(participant.code) %>%
summarise(mean_sub_EE=mean(EE, na.rm=T)) %>%
summarise(Avg_EE=mean(mean_sub_EE, na.rm=T)/30,
Var_EE=var(mean_sub_EE, na.rm=T)) %>%
mutate(PaperID = "2022Tve168",
TreatmentCode = "1a")
EE_baseline
View(tve_cpr_baseline)
### compute personal normative beliefs
PNB_baseline <- tve_cpr_baseline %>%
group_by(participant.code) %>%
summarise(Avg_PNB=mean(player.personal_normative_beliefs, na.rm=T)/30,
Var_PNB=var(player.personal_normative_beliefs, na.rm=T)/30) %>%
mutate(PaperID = "2022Tve168",
TreatmentCode = "1a")
PNB_baseline
### compute personal normative beliefs
PNB_baseline <- tve_cpr_baseline %>%
summarise(Avg_PNB=mean(player.personal_normative_beliefs, na.rm=T)/30,
Var_PNB=var(player.personal_normative_beliefs, na.rm=T)/30) %>%
mutate(PaperID = "2022Tve168",
TreatmentCode = "1a")
PNB_baseline
Tve_baseline_final_norms <- merge.data.frame(NE_baseline, EE_baseline, PNB_baseline, by = c("PaperID","TreatmentCode"))
Tve_baseline_final_norms <- merge.data.frame(NE_baseline, EE_baseline, PNB_baseline, by = c(PaperID,TreatmentCode))
Tve_baseline_final_norms <- merge.data.frame(NE_baseline, EE_baseline, PNB_baseline)
Tve_baseline_final_norms <- merge.data.frame(NE_baseline, EE_baseline, PNB_baseline, by="PaperID")
NE_baseline
EE_baseline
PNB_baseline
merge.data.frame(NE_baseline, EE_baseline, PNB_baseline, by="PaperID")
merge.data.frame(NE_baseline, EE_baseline, PNB_baseline)
Tve_baseline_final_norms <- tve_cpr_baseline %>%
reshape(direction = "long", varying = c(5:9,11:15), v.names = c("EE","NE")
)
View(Tve_baseline_final_norms)
Tve_baseline_final_norms <- tve_cpr_baseline %>%
reshape(direction = "long", varying = c(5:9,11:15), v.names = c("EE","NE")) %>%
group_by(participant.code) %>%
summarise(mean_sub_EE=mean(EE, na.rm=T),
mean_sub_NE=mean(EE, na.rm=T),
mean_sub_PNB=mean(player.personal_normative_beliefs, na.rm=T)) %>%
summarise(Avg_EE=mean(mean_sub_EE, na.rm=T)/30,
Var_EE=var(mean_sub_EE, na.rm=T)/30,
Avg_NE=mean(mean_sub_NE, na.rm=T)/30,
Var_NE=var(mean_sub_NE, na.rm=T)/30,
Avg_PNB=mean(player.personal_normative_beliefs, na.rm=T)/30,
Var_PNB=var(player.personal_normative_beliefs, na.rm=T)/30) %>%
mutate(PaperID = "2022Tve168",
TreatmentCode = "1a")
Tve_baseline_final_norms <- tve_cpr_baseline %>%
reshape(direction = "long", varying = c(5:9,11:15), v.names = c("EE","NE")) %>%
group_by(participant.code) %>%
summarise(mean_sub_EE=mean(EE, na.rm=T),
mean_sub_NE=mean(EE, na.rm=T),
mean_sub_PNB=mean(player.personal_normative_beliefs, na.rm=T)) %>%
summarise(Avg_EE=mean(mean_sub_EE, na.rm=T)/30,
Var_EE=var(mean_sub_EE, na.rm=T)/30,
Avg_NE=mean(mean_sub_NE, na.rm=T)/30,
Var_NE=var(mean_sub_NE, na.rm=T)/30,
Avg_PNB=mean(mean_sub_PNB, na.rm=T)/30,
Var_PNB=var(mean_sub_PNB, na.rm=T)/30) %>%
mutate(PaperID = "2022Tve168",
TreatmentCode = "1a")
Tve_baseline_final_norms
EE_baseline
Tve_baseline_final_norms <- tve_cpr_baseline %>%
reshape(direction = "long", varying = c(5:9,11:15), v.names = c("EE","NE")) %>%
group_by(participant.code) %>%
summarise(mean_sub_EE=mean(EE, na.rm=T),
mean_sub_NE=mean(NE, na.rm=T),
mean_sub_PNB=mean(player.personal_normative_beliefs, na.rm=T)) %>%
summarise(Avg_EE=mean(mean_sub_EE, na.rm=T)/30,
Var_EE=var(mean_sub_EE, na.rm=T)/30,
Avg_NE=mean(mean_sub_NE, na.rm=T)/30,
Var_NE=var(mean_sub_NE, na.rm=T)/30,
Avg_PNB=mean(mean_sub_PNB, na.rm=T)/30,
Var_PNB=var(mean_sub_PNB, na.rm=T)/30) %>%
mutate(PaperID = "2022Tve168",
TreatmentCode = "1a")
Tve_baseline_final_norms
tve_cpr_baseline %>%
reshape(direction = "long", varying = c(5:9,11:15), v.names = c("EE","NE"))
tve_cpr_baseline %>%
reshape(direction = "long", varying = c(5:9,11:15), v.names = c("EE","NE")) %>%
group_by(participant.code) %>%
summarise(mean_sub_EE=mean(EE, na.rm=T),
mean_sub_NE=mean(NE, na.rm=T),
mean_sub_PNB=mean(player.personal_normative_beliefs, na.rm=T))
mean(25,20,16,15,10)
mean(c(25,20,16,15,10))
25+20+16+15+10
86/5
15+14+12+10+5
56/5
20+16+15+10
61/4
mean(c(25,20,16,15))
(25+20+16+15)/4
Tve_baseline_final_norms <- tve_cpr_baseline %>%
reshape(direction = "long", varying = c(5:9,11:15), v.names = c("EE","NE"))
Tve_baseline_final_norms <- tve_cpr_baseline %>%
reshape(idvar="participant.code",direction = "long", varying = c(5:9,11:15), v.names = c("EE","NE"))
EE_baseline <- tve_cpr_baseline %>%
reshape(direction = "long", varying = 5:9, v.names = "EE")
View(EE_baseline)
tve_cpr_baseline %>%
reshape(direction = "long", varying = c(5:9,11:15), v.names = c("EE","NE"))
Tve_baseline_final_norms <- tve_cpr_baseline %>%
mutate(EE = mean(player.empirical_expectations0:player.empirical_expectations4))
Tve_baseline_final_norms <- tve_cpr_baseline %>%
mutate(EE = rowMeans(player.empirical_expectations0:player.empirical_expectations4))
Tve_baseline_final_norms <- inner_join(NE_baseline, EE_baseline, PNB_baseline, by="PaperID")
### compute normative expectation
NE_baseline <- tve_cpr_baseline %>%
reshape(direction = "long", varying = 11:15, v.names = "NE") %>%
group_by(participant.code) %>%
summarise(mean_sub_NE=mean(NE, na.rm=T)) %>%
summarise(Avg_NE=mean(mean_sub_NE, na.rm=T)/30,
Var_NE=var(mean_sub_NE, na.rm=T)/30) %>%
mutate(PaperID = "2022Tve168",
TreatmentCode = "1a")
### compute empirical expectation
EE_baseline <- tve_cpr_baseline %>%
reshape(direction = "long", varying = 5:9, v.names = "EE") %>%
group_by(participant.code) %>%
summarise(mean_sub_EE=mean(EE, na.rm=T)) %>%
summarise(Avg_EE=mean(mean_sub_EE, na.rm=T)/30,
Var_EE=var(mean_sub_EE, na.rm=T)/30) %>%
mutate(PaperID = "2022Tve168",
TreatmentCode = "1a")
### compute personal normative beliefs
PNB_baseline <- tve_cpr_baseline %>%
summarise(Avg_PNB=mean(player.personal_normative_beliefs, na.rm=T)/30,
Var_PNB=var(player.personal_normative_beliefs, na.rm=T)/30) %>%
mutate(PaperID = "2022Tve168",
TreatmentCode = "1a")
Tve_baseline_final_norms <- inner_join(NE_baseline, EE_baseline, PNB_baseline, by="PaperID")
Tve_baseline_final_norms <- inner_join(NE_baseline, EE_baseline, PNB_baseline, by=c("PaperID","TreatmentCode"))
Tve_baseline_final_norms <- inner_join(NE_baseline, EE_baseline, by=c("PaperID","TreatmentCode")) %>%
inner_join(PNB_baseline, by=c("PaperID","TreatmentCode"))
### compute normative expectation
NE_baseline <- tve_cpr_baseline %>%
reshape(direction = "long", varying = 11:15, v.names = "NE") %>%
group_by(participant.code) %>%
summarise(mean_sub_NE=mean(NE, na.rm=T)) %>%
summarise(Avg_NE=mean(mean_sub_NE, na.rm=T)/30,
Var_NE=var(mean_sub_NE, na.rm=T)/30) %>%
mutate(PaperID = "2022Tve168",
TreatmentCode = "1a")
### compute empirical expectation
EE_baseline <- tve_cpr_baseline %>%
reshape(direction = "long", varying = 5:9, v.names = "EE") %>%
group_by(participant.code) %>%
summarise(mean_sub_EE=mean(EE, na.rm=T)) %>%
summarise(Avg_EE=mean(mean_sub_EE, na.rm=T)/30,
Var_EE=var(mean_sub_EE, na.rm=T)/30) %>%
mutate(PaperID = "2022Tve168",
TreatmentCode = "1a")
### compute personal normative beliefs
PNB_baseline <- tve_cpr_baseline %>%
summarise(Avg_PNB=mean(player.personal_normative_beliefs, na.rm=T)/30,
Var_PNB=var(player.personal_normative_beliefs, na.rm=T)/30) %>%
mutate(PaperID = "2022Tve168",
TreatmentCode = "1a")
## merge norms
Tve_baseline_final_norms <- inner_join(NE_baseline, EE_baseline, by=c("PaperID","TreatmentCode")) %>%
inner_join(PNB_baseline, by=c("PaperID","TreatmentCode")) %>%
mutate(Avg_KW_m = NA,
Sd_Avg_NE = NA,
Sd_Avg_NE_min_max = NA,
specificity_plus = NA,
specificity_min = NA,
max_sigma = NA)
## 3. combine dataset ----
finaldf <- meta_dataset %>% merge.data.frame(tve_baseline_coop, by = c("PaperID","TreatmentCode")) %>%
merge.data.frame(Tve_baseline_final_norms, all.x=T, by = c("PaperID","TreatmentCode"))
View(finaldf)
prova <- tve_cpr_baseline[,5:9]
View(prova)
prova <- mean(rowMeans(tve_cpr_baseline[,5:9]))
prova <- mean(rowMeans(tve_cpr_baseline[,5:9]))/30
prova <- mean(rowMeans(tve_cpr_baseline[,11:15]))/30
prova <- var(rowMeans(tve_cpr_baseline[,11:15]))/30
### compute normative expectation
NE_baseline <- tve_cpr_baseline %>%
reshape(direction = "long", varying = player.normative_expectations0:player.normative_expectations4, v.names = "NE") %>%
group_by(participant.code) %>%
summarise(mean_sub_NE=mean(NE, na.rm=T)) %>%
summarise(Avg_NE=mean(mean_sub_NE, na.rm=T)/30,
Var_NE=var(mean_sub_NE, na.rm=T)/30) %>%
mutate(PaperID = "2022Tve168",
TreatmentCode = "1a")
source("~/CNR/GitHub/Social_norm_meta_analysis/Paper_script/2022Tve168.R", echo=TRUE)
View(finaldf)
source("~/CNR/GitHub/Social_norm_meta_analysis/Paper_script/2022Tve168.R", echo=TRUE)
View(finaldf)
write.csv(finaldf, file = paste(csv_path_output, paste(finaldf$PaperID[1], "_finaldf.csv", sep = ""), sep = ""), row.names = F)
source("~/CNR/GitHub/Social_norm_meta_analysis/Paper_script/2022Tve168.R", echo=TRUE)
View(finaldf)
source("~/CNR/GitHub/Social_norm_meta_analysis/File_DB/Treatment_db.R", echo=TRUE)
View(master)
View(master)
